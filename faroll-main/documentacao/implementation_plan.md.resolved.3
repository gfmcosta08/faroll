# Sincroniza칞칚o Google Calendar - Farollbr

Implementar a sincroniza칞칚o bidirecional entre o calend치rio do Farollbr e o Google Calendar, integrada ao fluxo de registro de novos usu치rios.

## User Review Required

> [!IMPORTANT]
> A sincroniza칞칚o com Google Calendar requer que o usu치rio autorize o acesso  sua conta Google durante ou logo ap칩s o registro.
> As regras de sincroniza칞칚o propostas s칚o:
> 1. **Google -> Farollbr**: Eventos do Google s칚o importados como "Bloqueios de Agenda" (游댮) para profissionais, impedindo agendamentos de clientes.
> 2. **Farollbr -> Google**: Agendamentos feitos na plataforma (游댯) e eventos pessoais (游릭) s칚o adicionados ao Google Calendar do usu치rio.

## Proposed Changes

### [Autentica칞칚o e Registro]
#### [MODIFY] [AuthRegisterForm.tsx](file:///c:/Users/GIANPAOLO/.gemini/antigravity/playground/farollbr/src/components/auth/AuthRegisterForm.tsx)
- Adicionar op칞칚o "Sincronizar com Google Calendar" ao final do formul치rio.
- Chamar fluxo OAuth da Google antes de finalizar o registro para coletar tokens.

### [Core Logic]
#### [MODIFY] [AppContext.tsx](file:///c:/Users/GIANPAOLO/.gemini/antigravity/playground/farollbr/src/contexts/AppContext.tsx)
- Atualizar [isDateBlocked](file:///c:/Users/GIANPAOLO/.gemini/antigravity/playground/farollbr/src/contexts/AppContext.tsx#714-751) para considerar eventos vindos do Google (bloqueios externos).
- Adicionar hooks de efeito para disparar sincroniza칞칚o quando novos agendamentos forem criados.

### [Banco de Dados]
#### [NEW] [Migration: google_calendar_sync](file:///c:/Users/GIANPAOLO/.gemini/antigravity/playground/farollbr/supabase/migrations/202602121545_google_sync.sql)
- Tabela `google_sync_settings`: `user_id`, `access_token`, `refresh_token`, `calendar_id`, `last_sync`.
- Campo `external_id` na tabela `calendar_events` para evitar duplicidade.

## Verification Plan

### Manual Verification
1. Realizar o cadastro de um novo Profissional.
2. Autorizar o Google Calendar.
3. Criar um evento no Google Calendar pessoal.
4. Verificar se o hor치rio aparece como "Bloqueado" na agenda do Farollbr.
5. Agendar uma consulta no Farollbr e verificar se aparece no Google Calendar.
